---
import { getCollection } from "astro:content";
import PageLayout from "@layouts/PageLayout.astro";
import Container from "@components/Container.astro";
import Link from "@components/Link.astro";
import { dateRange } from "@lib/utils";
import { WORK, SITE } from "@consts";

const baseUrl = import.meta.env.BASE_URL;

const collection = (await getCollection("work"))
  .sort((a, b) => new Date(b.data.dateStart).valueOf() - new Date(a.data.dateStart).valueOf());

const work = await Promise.all(
  collection.map(async (item) => {
    const { Content } = await item.render();
    return { ...item, Content };
  })
);
---

<PageLayout title={WORK.TITLE} description={WORK.DESCRIPTION}>
  <Container>
    <div class="space-y-10">
      <!-- Work Experience Section -->
      <section class="animate space-y-4">
        <div class="flex items-center justify-between border-b border-black/10 dark:border-white/25 pb-2">
          <h2 class="font-bold text-xl text-black dark:text-white">
            Work Experience
          </h2>
        </div>
        {work.length > 0 ? (
          <ul class="space-y-6">
            {work.map(entry => (
              <li class="space-y-1">
                <div class="flex items-start justify-between gap-4">
                  <div class="flex-1">
                    <div class="font-semibold text-black dark:text-white">
                      {entry.data.company}
                    </div>
                    <div class="text-sm opacity-75">
                      {entry.data.role}
                    </div>
                  </div>
                  <div class="text-sm opacity-75 text-right whitespace-nowrap">
                    {dateRange(entry.data.dateStart, entry.data.dateEnd)}
                  </div>
                </div>
                <article class="text-sm opacity-90 pt-1">
                  <entry.Content />
                </article>
              </li>
            ))}
          </ul>
        ) : (
          <ul class="space-y-6">
            <li class="space-y-1">
              <div class="flex items-start justify-between gap-4">
                <div class="flex-1">
                  <div class="font-semibold text-black dark:text-white">
                    Alpha Co.
                  </div>
                  <div class="text-sm opacity-75">
                    Co-Founder
                  </div>
                </div>
                <div class="text-sm opacity-75 text-right whitespace-nowrap">
                  June 2024 – Present
                </div>
              </div>
              <article class="text-sm opacity-90 pt-1">
                <ul class="list-disc list-inside space-y-1">
                  <li>Co-founded startup specializing in adjustable dipping containers, optimizing buffalo wing dining experience.</li>
                  <li>Developed minimum viable product (MVP) capable of early-stage revenue generation.</li>
                  <li>Received positive feedback from established brands like Buffalo Wild Wings for innovative sauce holder designs.</li>
                </ul>
              </article>
            </li>
            <li class="space-y-1">
              <div class="flex items-start justify-between gap-4">
                <div class="flex-1">
                  <div class="font-semibold text-black dark:text-white">
                    Private Math Tutor
                  </div>
                  <div class="text-sm opacity-75">
                    Team Captain
                  </div>
                </div>
                <div class="text-sm opacity-75 text-right whitespace-nowrap">
                  Sept. 2021 – Present
                </div>
              </div>
              <article class="text-sm opacity-90 pt-1">
                <ul class="list-disc list-inside space-y-1">
                  <li>Provided personalized tutoring sessions in algebra, calculus, and geometry to elementary & middle-school students.</li>
                  <li>Developed lesson plans for diverse learning styles, leading to improvements by upwards of 1.5 letter grades.</li>
                </ul>
              </article>
            </li>
          </ul>
        )}
      </section>
    </div>
  </Container>
</PageLayout>